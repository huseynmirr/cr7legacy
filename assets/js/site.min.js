(function(){'use strict';function formatDate(isoString){try{const date=new Date(isoString);const day=date.getDate();const month=date.toLocaleDateString('en-US',{month:'short'});const year=date.getFullYear();return `as of ${day} ${month} ${year}`}catch(error){console.warn('Error formatting date:',error);return 'as of recent'}}function updateKPIs(data){try{const intlGoalsEl=document.getElementById('kpi-intl-goals');const intlCapsEl=document.getElementById('kpi-intl-caps');const intlAsOfEl=document.getElementById('kpi-intl-asof');if(intlGoalsEl&&intlCapsEl&&intlAsOfEl){intlGoalsEl.textContent=data.national_team.goals;intlCapsEl.textContent=data.national_team.caps;intlAsOfEl.textContent=formatDate(data.national_team.as_of)}const clubGoalsEl=document.getElementById('kpi-club-goals');const clubGamesEl=document.getElementById('kpi-club-games');const clubAsOfEl=document.getElementById('kpi-club-asof');if(clubGoalsEl&&clubGamesEl&&clubAsOfEl){clubGoalsEl.textContent=data.al_nassr.goals;clubGamesEl.textContent=data.al_nassr.games;clubAsOfEl.textContent=formatDate(data.al_nassr.as_of)}console.log('KPI data loaded successfully:',data)}catch(error){console.warn('Error updating KPI elements:',error)}}function updateChips(data){try{const chipIntlGoalsEl=document.getElementById('chip-intl-goals');const chipIntlCapsEl=document.getElementById('chip-intl-caps');const chipIntlAsOfEl=document.getElementById('chip-intl-asof');if(chipIntlGoalsEl&&chipIntlCapsEl&&chipIntlAsOfEl){chipIntlGoalsEl.textContent=data.national_team.goals;chipIntlCapsEl.textContent=data.national_team.caps;chipIntlAsOfEl.textContent=formatDate(data.national_team.as_of)}const chipClubGoalsEl=document.getElementById('chip-club-goals');const chipClubGamesEl=document.getElementById('chip-club-games');const chipClubAsOfEl=document.getElementById('chip-club-asof');if(chipClubGoalsEl&&chipClubGamesEl&&chipClubAsOfEl){chipClubGoalsEl.textContent=data.al_nassr.goals;chipClubGamesEl.textContent=data.al_nassr.games;chipClubAsOfEl.textContent=formatDate(data.al_nassr.as_of)}console.log('Chip data loaded successfully:',data)}catch(error){console.warn('Error updating chip elements:',error)}}function initRecordsSearch(){const searchInput=document.getElementById('records-search');const recordsCount=document.querySelector('.records-count');if(!searchInput||!recordsCount)return;const allTables=document.querySelectorAll('.table-records');let totalRecords=0;allTables.forEach(table=>{const rows=table.querySelectorAll('tbody tr');totalRecords+=rows.length});function updateSearch(){const query=searchInput.value.toLowerCase().trim();let visibleCount=0;allTables.forEach(table=>{const rows=table.querySelectorAll('tbody tr');rows.forEach(row=>{const text=row.textContent.toLowerCase();const isVisible=query===''||text.includes(query);row.style.display=isVisible?'':'none';if(isVisible)visibleCount++})});recordsCount.textContent=`Showing ${visibleCount} of ${totalRecords} records`}searchInput.addEventListener('input',updateSearch);updateSearch()}function renderTeamHonours(data){const container=document.getElementById('team-honours');if(!container||!data.major_team_honours)return;container.innerHTML=data.major_team_honours.map(team=>`<article class="team-card reveal"><h4>${team.team}</h4><ul class="trophy-list">${team.trophies.map(trophy=>`<li>${trophy}</li>`).join('')}</ul></article>`).join('')}function renderIndividualAwards(data){const container=document.getElementById('individual-awards');if(!container||!data.individual_awards)return;const ballonDorYears=data.individual_awards.ballon_dor||[];const otherAwards=data.individual_awards.others||[];container.innerHTML=`<article class="awards-card reveal"><h4>Ballon d'Or</h4><p><span id="bdor-years">${ballonDorYears.join(', ')}</span></p><h4>Other Awards</h4><ul class="award-list">${otherAwards.map(award=>`<li>${award}</li>`).join('')}</ul></article>`;const bdorCountEl=document.getElementById('bdor-count');if(bdorCountEl){bdorCountEl.textContent=ballonDorYears.length}}function prefersReducedMotion(){return window.matchMedia&&window.matchMedia('(prefers-reduced-motion: reduce)').matches}function initRevealAnimations(){const revealElements=document.querySelectorAll('.reveal');if(revealElements.length===0){return}if(prefersReducedMotion()){revealElements.forEach(element=>{element.classList.add('reveal--visible')});return}if(!('IntersectionObserver' in window)){revealElements.forEach(element=>{element.classList.add('reveal--visible')});return}const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('reveal--visible');observer.unobserve(entry.target)}})},{root:null,rootMargin:'0px 0px -10% 0px',threshold:0.1});revealElements.forEach(element=>{observer.observe(element)});console.log(`Reveal animations initialized for ${revealElements.length} elements`)}function loadData(){fetch('assets/data/ronaldo.json').then(response=>{if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`)}return response.json()}).then(data=>{if(data.national_team&&data.al_nassr){updateKPIs(data);updateChips(data);renderTeamHonours(data);renderIndividualAwards(data)}else{throw new Error('Invalid data structure')}}).catch(error=>{console.warn('Failed to load data:',error.message)})}function init(){loadData();initRecordsSearch();initRevealAnimations()}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',init)}else{init()}if(window.matchMedia){const mediaQuery=window.matchMedia('(prefers-reduced-motion: reduce)');mediaQuery.addEventListener('change',()=>{initRevealAnimations()})}})();

